<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${#strings.isEmpty(userForm.id) ? 'Create User' : 'Edit User'}">User</title>
    <style>
        label { display:block; margin-top:10px }
        input, select { min-width: 260px; }
    </style>
</head>
<body>
<h1 th:text="${#strings.isEmpty(userForm.id) ? 'Create User' : 'Edit User'}">User</h1>

<form th:object="${userForm}"
      th:action="${#strings.isEmpty(userForm.id) ? @{/admin/user-mgmt} : @{/admin/user-mgmt/{id}(id=${userForm.id})}}"
      method="post">

    <!-- Username: chỉ cho nhập khi tạo mới -->
    <div th:if="${#strings.isEmpty(userForm.id)}">
        <label>Username</label>
        <input type="text" th:field="*{username}" required>
    </div>
    <div th:if="${!#strings.isEmpty(userForm.id)}">
        <label>Username</label>
        <input type="text" th:value="${userForm.username}" disabled>
    </div>

    <label>Full name</label>
    <input type="text" th:field="*{fullName}">

    <label>Email</label>
    <input type="email" th:field="*{email}">

    <label>Password</label>
    <input type="password" th:field="*{password}">
    <small th:if="${!#strings.isEmpty(userForm.id)}">(Để trống nếu không đổi)</small>

    <label>Role</label>
    <select th:field="*{roleName}">
        <option value="ROLE_ADMIN">ROLE_ADMIN</option>
        <option value="ROLE_DEALER_MANAGER">ROLE_DEALER_MANAGER</option>
        <option value="ROLE_DEALER_STAFF">ROLE_DEALER_STAFF</option>
        <option value="ROLE_EVM_STAFF">ROLE_EVM_STAFF</option>
    </select>

    <label>Dealer</label>
    <select th:field="*{dealerId}">
        <option th:value="">-- none --</option>
        <option th:each="d : ${dealers}" th:value="${d.id}" th:text="${d.name}"></option>
    </select>

    <label>Region</label>
    <select th:field="*{regionId}">
        <option th:value="">-- none --</option>
        <option th:each="r : ${regions}" th:value="${r.id}" th:text="${r.name}"></option>
    </select>

    <label>
        <input type="checkbox" th:field="*{enabled}"> Enabled
    </label>

    <div style="margin-top:14px">
        <button type="submit">Save</button>
        <a th:href="@{/admin/user-mgmt}">Cancel</a>
    </div>
</form>
</body>
</html>
